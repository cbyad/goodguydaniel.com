{"componentChunkName":"component---src-lekoarts-gatsby-theme-minimal-blog-core-templates-post-query-tsx","path":"/blog/call-react-hooks-inside-condition","result":{"data":{"post":{"__typename":"MdxPost","slug":"/blog/call-react-hooks-inside-condition","title":"You Can't Call Hooks Inside Conditions? Yes you can","date":"20.05.2020","tags":[{"name":"JavaScript","slug":"java-script"},{"name":"React","slug":"react"}],"description":"Description for SEO and stuff","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"You Can't Call Hooks Inside Conditions? Yes you can\",\n  \"subtitle\": \"Because rules are made to be broken\",\n  \"description\": \"Description for SEO and stuff\",\n  \"date\": \"2020-05-20T00:00:00.000Z\",\n  \"slug\": \"/blog/call-react-hooks-inside-condition\",\n  \"tags\": [\"JavaScript\", \"React\"]\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(ScrollToTopButton, {\n    mdxType: \"ScrollToTopButton\"\n  }), mdx(\"h3\", {\n    \"id\": \"tldr\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"tl;dr\", mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#tldr\",\n    \"aria-label\": \"tldr permalink\",\n    \"className\": \"anchor after\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"style\": {\n      \"paddingLeft\": \"12px\"\n    },\n    \"width\": \"28\",\n    \"height\": \"16\",\n    \"fill\": \"#9f7aea\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))))), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Calling hooks conditionally breaks the rules, yes.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Wrap the hook with a component and render that component optionally to toggle the usage of the hook.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The rules of hooks are somewhat reflections of the constraints of this React API.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Example final full code \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#example-full-code\"\n  }), \"here\"), \".\")), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"400px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"100.41666666666667%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFRElEQVQ4yy2SCVSNaRjHv8EgOZZEDS0uimpKKnItWQY5TTNkCUWMFlvoJpKEipkJh3FwjDH2moOIyxQm+zaDrDOTEc6xV7e739u91834zXvv+M75f+/7PsvveZ73vJLKbKbBYqHBakUtpLHZnNI3NWECrEJqSyMPnj7jrV7v9Klt/8c68lSNjdSbG6k1mXlrMCKphUFttYhAK9p3Nqf0TXZe67Tcr6mh6ukL1h8sY2txKY9fPkdnf/cRanPmNYh8VaNZQM3UGgVQI6prbRa0dqsIFtAmB9TKb1evMnbSFKLiZxIUm0j+zmJntxpHjN3mlEbkOaEWMaWA1jmAelFBJ4w6ATGKIEPTO/Qf16q/HrJ4mYLFuSuoevQI8792UbzR6XfI0YjG2ugEqswm6g16JJ3Y6IXRKIAmUd0sAh2ryW7B8Tn+T2tfY3hvxS72TULm93Z0FpFnczRjRttoRG0yoNLrkAwmIwbRrlGMbnKARTWL3Y6ND/xdXcX+LYVkJ3xN3vRx7MrPpPLXEur0ddg+gN5sdMK0AqYx6GjQa8TIYmMUBpPo1CgCrOLSG/Qq9mzKZWFUOEm9uzE7xIcF4TJSA72YE9yDlVPHcO3SSazvm9AbdWiFNAKm1jaIkfVqDCYHVI/FcR+6OjZkJpEW4k9O3EAK0uWsUcgpzBJSDGHtvOGkDwlm3qBAzir3YhGvQ6NVodGoUKlqxbNpqBWHeqfBZDWxe2MOaWF+LI8dxoopQylaOYii3MGsz5WzefUgflg7nO+yh6IYGUr6iL7cuX0RrU7NmzcvePvqOVL96xfUvXmJTqPmTtUl0oeFsjQ23AnKnRBFbvwQNq4R0Bw5k6NlzE8M4tvsAeTPj2ROeG82ZSfztvYVz5/V8LzmH6RXT2p49eQxWlU9xdsLSQ6RsSo5nO9XhLM0JYT5wyNZOjmS0XIPfN1aMX6kL2syIli3rD+K6GAWjYmg6o/LPKuu5tH9e0h3b9/j4Z37PKp+TFHmbFJCu5M3N5TVi8JEsg89PV2ZOaAvo/y7IevSkgUJAWzMHcjapeEsmxhMav/eKEv38/DuA25d/x3pypVbXLt6h+s3/2TNvARm9PEgb04wBRkh5KQEMCnaG3lgF9Lk/YgJ8yFzlh+r5n5OgaIvWXGBpPT3Z9+eH7lw8SYVFZVI587doLLyOpdvPKRgSSqxXVqTEdeT5bN7kT2rF+sUIShmB7Bwgj/z5X1QTOrl9GVNl5EyyIdvBvpx8GAJ5eWXOV52Gqmi4pI4XOT8pSq2b9nM0PYtmBjgTlaijAVxXmQmdGfJDD9S47ozbYgvU/t0FXBfFk2UMdZDXMeoCMqUZzl2rIIjR04hKZWVnFCeQ3nyPMryC8SLx9xXkpgS4YEiXow41Yd547xJjvEibbwXSYM9ie3RkZHe7QhvLbF6+TLKTpyjpKSMYiHpSGk5R0pPc0isx09dZOv2nQz0bE+AgI6RtWNGlAdJX3Rl1mgvkqO7MjnSnVDXVvgJf9JX0RQfOsm+/UfZs+8wu/ceQio9doZDR09z+PhZSo6Wozxzjc3bdhAVICOwxSdEuLRiQAcXBru70q9tS2FrTqBLc+KiR7Bt10H2l5zgQMlx9h44yk8//4KkyCskf8NWlheuZ/2O3WSszGdEXDw+wSF07NAGXwHp2eZTejvWdq3xdnPF7TN3Ovv74xUUROSoMUxLnkvK4ixWFhQhxUxL4MvERMbGxxMzfQaTk1OImTgBr4AgeoRF4C3Abp6dcevmQavOnWjWvj0tOnakWdu2SK5tkMQEkktrsXfFpZM7/wG540Uijb4FKwAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"\\\"forbidden seagul bending the rules\\\"\",\n    \"title\": \"\\\"forbidden seagul bending the rules\\\"\",\n    \"src\": \"/static/4c1767dfa18b327be99e8f4d324c3427/6a8a8/forbidden-seagull.png\",\n    \"srcSet\": [\"/static/4c1767dfa18b327be99e8f4d324c3427/5243c/forbidden-seagull.png 240w\", \"/static/4c1767dfa18b327be99e8f4d324c3427/6a8a8/forbidden-seagull.png 400w\"],\n    \"sizes\": \"(max-width: 400px) 100vw, 400px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \")), mdx(Caption, {\n    source: \"https://www.flickr.com/photos/sameli/1898511953\",\n    mdxType: \"Caption\"\n  }), mdx(\"h3\", {\n    \"id\": \"bending-the-rules\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Bending the Rules\", mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#bending-the-rules\",\n    \"aria-label\": \"bending the rules permalink\",\n    \"className\": \"anchor after\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"style\": {\n      \"paddingLeft\": \"12px\"\n    },\n    \"width\": \"28\",\n    \"height\": \"16\",\n    \"fill\": \"#9f7aea\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))))), mdx(\"p\", null, \"There's a \", mdx(\"a\", {\n    href: \"https://reactjs.org/docs/hooks-rules.html\",\n    target: \"_blank\",\n    title: \"Rules of Hooks - React\"\n  }, \"bunch of reasons why you can't use a React hook conditionally\"), \" under a particular condition.\"), mdx(\"p\", null, \"Before I start, I would like you to take a moment to reflect on the following questions?\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Why did you end up needing this? And, is it your fault, or is it the library's fault?\")), mdx(\"p\", null, \". \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null), \"\\n. \", mdx(\"br\", null)), mdx(\"p\", null, \"When I first tried to answer the question myself, I settled that it would be my fault If I had written the code since the very beginning.\\nIf you pick React hooks API, you should structure the code accordingly not to end up falling into such scenarios where your better option might be breaking the rules. On the other end, if you have hundreds of components combined in a large shared codebase, you might hit a dead end where the most optimal option for the time being it's not beautiful. Still, it gets the job done and buys you and your team time to get things out faster, ideally you would come back and remove the hack later. Still, most of the time in the real world, we know that's not going to happen, so you better documenting it properly to alleviate the unavoidable spike on \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"WTFs/minute\"), \" (got this from \", mdx(\"a\", {\n    href: \"https://www.amazon.com/gp/product/0132350882/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=0132350882&linkCode=as2&tag=goodguydaniel-20&linkId=7d43375b6b0cd381f5ce0e61779b6fc5\",\n    target: \"_blank\",\n    title: \"Clean Code: A Handbook of Agile Software Craftsmanship\"\n  }, \"Clean Code by Robert C. Martin\"), \").\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"499px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"82.5%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsTAAALEwEAmpwYAAABkklEQVQ4y23TV0LDQAwEUN//kukhvZBezWPHGAjoI9FKmtFIu67O5/N7sfv9vtls1uv16XQ6Ho+bYofDgb9cLler1WKx8CuoGKqu60q1w36/l1O02+2m0yknRMCct2Kj0WgymUipVPYJ9ocbWHS73V4uF/RhlErnfTHBtN0WezweFYLn88nzW/+2l/jzy1q/qv+zv0T6W8pLsKLzb+J2u1mbtmbh4zItzfG/wdfrFfillWmHwyEHRXjBsicR8zdgKxE6F7sWE7WPTqfDySIBsiRH62xlVvP5HFhUf46jqJX2ej1O7ilgBePxmNPKrBbF9AETRUwLP7JDB6+Aj9QrkELXdE5p9MjlqXW7XWlEIsB66uyqIyHKK3XRYO2kSqdhO3NeIhsWk8pemufZXjrWHHEPBoOAozCMebmcjN10zsHFBgyTheVu2gJZvN/3PJvNJFyjMSg3PwqYzIw61RnSkTrbaTpbialU+M1noI7T7/exqDYnqbTg9WtglVKfYGNonk/aR5cpCPEe0zA7Y/nmfj7ED6mU0xUKKfDXAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"\\\"code review cartoon\\\"\",\n    \"title\": \"\\\"code review cartoon\\\"\",\n    \"src\": \"/static/f2b9129a99e156b5a35732f6b5e0de07/32181/wtfs-per-minute-code-review.png\",\n    \"srcSet\": [\"/static/f2b9129a99e156b5a35732f6b5e0de07/5243c/wtfs-per-minute-code-review.png 240w\", \"/static/f2b9129a99e156b5a35732f6b5e0de07/ab158/wtfs-per-minute-code-review.png 480w\", \"/static/f2b9129a99e156b5a35732f6b5e0de07/32181/wtfs-per-minute-code-review.png 499w\"],\n    \"sizes\": \"(max-width: 499px) 100vw, 499px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \")), mdx(Caption, {\n    source: \"https://me.me/i/the-ouy-vcile-41-wtf-cocle-review-wtf-review-bad-20268515\",\n    mdxType: \"Caption\"\n  }), mdx(\"p\", null, \"As always, I think there's nothing better than an example to explain a concept, let's look into one.\"), mdx(\"p\", null, \"In this example, we have a custom hook \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useRandomNumberEverySecond\"), \" that produces a random number every one second. In a real scenario, you could potentially have a super sophisticated hook that performs asynchronous stuff like data fetching and puts everything together. For the sake of simplicity, we're just returning a number.\"), mdx(\"p\", null, \"We want only to call on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useRandomNumberEverySecond\"), \" and use its result, if and only if, a flag \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"isHookActive\"), \" has value \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"true\"), \". But, how can we achieve this if we declare hooks at the top level of a component, and we can't wrap them inside \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"if\"), \" statements?\"), mdx(\"p\", null, \"My suggested approach is to wrap our hook \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useRandomNumberEverySecond\"), \" in a second component, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"RandomNumberWrapper\"), \", that mediates the relationship between our target component and the hook \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useRandomNumberEverySecond\"), \". Let's see how that looks.\"), mdx(GIF, {\n    name: \"example-final-result\",\n    mdxType: \"GIF\"\n  }), mdx(Caption, {\n    gif: true,\n    mdxType: \"Caption\"\n  }), mdx(\"p\", null, \"As proof of concept, the goal is to have the button in the interface toggle the usage of our custom React hook.\"), mdx(\"h4\", {\n    \"id\": \"custom-react-hook\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Custom React Hook\", mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#custom-react-hook\",\n    \"aria-label\": \"custom react hook permalink\",\n    \"className\": \"anchor after\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"style\": {\n      \"paddingLeft\": \"12px\"\n    },\n    \"width\": \"28\",\n    \"height\": \"16\",\n    \"fill\": \"#9f7aea\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))))), mdx(\"p\", null, \"Our custom hook \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useRandomNumberEverySecond\"), \" generates a random number every second.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"function getRandomInt(max) {\\n  return Math.floor(Math.random() * Math.floor(max));\\n}\\n\\nfunction useRandomNumberEverySecond(max = 1000) {\\n  const [number, setNumber] = useState(getRandomInt(max));\\n\\n  useEffect(() => {\\n    const interval = setInterval(() => setNumber(getRandomInt(max)), 1000);\\n    return () => clearInterval(interval);\\n  }, [max]);\\n\\n  return number;\\n}\\n\")), mdx(\"br\", null), mdx(\"h4\", {\n    \"id\": \"the-main-component\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"The Main Component\", mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#the-main-component\",\n    \"aria-label\": \"the main component permalink\",\n    \"className\": \"anchor after\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"style\": {\n      \"paddingLeft\": \"12px\"\n    },\n    \"width\": \"28\",\n    \"height\": \"16\",\n    \"fill\": \"#9f7aea\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))))), mdx(\"p\", null, \"Our main component looks like this, where \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"number\"), \" is provided by our custom hook (when active).\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\"\n  }), \"export default function App() {\\n  const [isHookActive, setIsHookActive] = useState(false);\\n  const [number, setNumber] = useState(0);\\n  return (\\n    <div className=\\\"App\\\">\\n      <h1>Bending the Rules of Hooks</h1>\\n      <button onClick={() => setIsHookActive(!isHookActive)}>Click to toggle custom hook usage</button>\\n      <h4>{isHookActive ? `hook output is: ${number}` : \\\"hook is not active\\\"}</h4>\\n      {isHookActive && <RandomNumberWrapper setState={setNumber} />}\\n    </div>\\n  );\\n}\\n\")), mdx(\"p\", null, \"Notice that the component \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"RandomNumberWrapper\"), \" only renders when \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"isHookActive\"), \" is true. Now let's take a look at \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"RandomNumberWrapper\"), \".\"), mdx(\"p\", null, \"Now let's see how our main component consumes the custom hook \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useRandomNumberEverySecond\"), \".\"), mdx(\"h4\", {\n    \"id\": \"the-wrapper-component\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"The Wrapper Component\", mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#the-wrapper-component\",\n    \"aria-label\": \"the wrapper component permalink\",\n    \"className\": \"anchor after\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"style\": {\n      \"paddingLeft\": \"12px\"\n    },\n    \"width\": \"28\",\n    \"height\": \"16\",\n    \"fill\": \"#9f7aea\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))))), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"function RandomNumberWrapper({ setState }) {\\n  const number = useRandomNumberEverySecond();\\n\\n  useEffect(() => {\\n    setState(number);\\n  }, [setState, number]);\\n\\n  return null;\\n}\\n\")), mdx(\"p\", null, \"And that's it! \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"RandomNumberWrapper\"), \" blindly proxies whatever data comes from \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useRandomNumberEverySecond\"), \" via the callback \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"setState\"), \", which then updates the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"number\"), \" state property in our main component. You can go ahead and apply this pattern to any hook in your codebase, wrapping up, you need to:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Create a new component to \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"wrap the usage of the hook\"), \" you intent to use conditionally.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Pass into this new component, a \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"setter\"), \" that \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"allows you to forward the data\"), \" back to the parent component.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Conditionally mount the new component\"), \" in your target component and pass in the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"setter\"), \" as a prop to the new component, that's how you're going to receive the state updates coming from your custom React hook.\")), mdx(\"h4\", {\n    \"id\": \"closing-notes\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Closing Notes\", mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#closing-notes\",\n    \"aria-label\": \"closing notes permalink\",\n    \"className\": \"anchor after\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"style\": {\n      \"paddingLeft\": \"12px\"\n    },\n    \"width\": \"28\",\n    \"height\": \"16\",\n    \"fill\": \"#9f7aea\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))))), mdx(\"p\", null, \"I hope you found this pattern helpful! If you're curious to read more on the subject, I advise checking this excellent blog post entitled \\\"\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://inventingwithmonster.io/20190207-break-the-rules-of-react-hooks/\",\n    \"title\": \"How to break the rules of React Hooks | Inventing With Monster\"\n  }), \"How to Break the Rules of React Hooks\"), \"\\\".\"), mdx(\"p\", null, \"After working some time with \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://en.wikipedia.org/wiki/Observer_pattern\",\n    \"title\": \"Reactivity/Statements - Svelte Tutorial\"\n  }), \"reactivity blocks in Svelte\"), \". It feels like the conceptual and productivity jump in terms of evolution.\"), mdx(\"h5\", {\n    \"id\": \"example-full-code\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Example Full Code\", mdx(\"a\", _extends({\n    parentName: \"h5\"\n  }, {\n    \"href\": \"#example-full-code\",\n    \"aria-label\": \"example full code permalink\",\n    \"className\": \"anchor after\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"style\": {\n      \"paddingLeft\": \"12px\"\n    },\n    \"width\": \"28\",\n    \"height\": \"16\",\n    \"fill\": \"#9f7aea\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))))), mdx(Accordion, {\n    summary: \"Expand to see example full code\",\n    mdxType: \"Accordion\"\n  }, mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\"\n  }), \"import React, { useState, useEffect } from \\\"react\\\";\\n\\nfunction getRandomInt(max) {\\n  return Math.floor(Math.random() * Math.floor(max));\\n}\\n\\nfunction useRandomNumberEverySecond(max = 1000) {\\n  const [number, setNumber] = useState(getRandomInt(max));\\n\\n  useEffect(() => {\\n    const interval = setInterval(() => setNumber(getRandomInt(max)), 1000);\\n    return () => clearInterval(interval);\\n  }, [max]);\\n\\n  return number;\\n}\\n\\nfunction RandomNumberWrapper({ setState }) {\\n  const number = useRandomNumberEverySecond();\\n\\n  useEffect(() => {\\n    setState(number);\\n  }, [setState, number]);\\n\\n  return null;\\n}\\n\\nexport default function App() {\\n  const [isHookActive, setIsHookActive] = useState(false);\\n  const [number, setNumber] = useState(0);\\n  return (\\n    <div className=\\\"App\\\">\\n      <h1>Bending the Rules of Hooks</h1>\\n      <button onClick={() => setIsHookActive(!isHookActive)}>Click to toggle custom hook usage</button>\\n      <h4>{isHookActive ? `hook output is: ${number}` : \\\"hook is not active\\\"}</h4>\\n      {isHookActive && <RandomNumberWrapper setState={setNumber} />}\\n    </div>\\n  );\\n}\\n\"))));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"tl;dr Calling hooks conditionally breaks the rules, yes. Wrap the hook with a component and render that component optionally to toggle the…","timeToRead":2,"banner":null,"parent":{"__typename":"Mdx","frontmatter":{"subtitle":"Because rules are made to be broken"}}}},"pageContext":{"slug":"/blog/call-react-hooks-inside-condition","formatString":"DD.MM.YYYY"}}}